<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>DozenValues</title>
    <link rel=icon type=x-icon href="icon.png" />
    <link rel="shortcut icon" type=x-icon href="icon.png" />
    <meta property=og:title content="DozenValues" />
    <meta property=og:description
        content="DozenValues is a political test that aims to map differing political perspectives onto six axes." />
    <meta property=og:url content="https://quark88.github.io/dozenvalues" />
    <meta property=og:image content="https://github.com/QUARK88/dozenvalues/blob/master/icon.png?raw=true" />
    <meta property=og:type content="Political test" />
    <meta property=og:locale content="en_US" />
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <h1>DozenValues</h1>
    <h2 style="text-align:center">Custom</h2>
    <center>
        <h3>Customized results generation. WORK IN PROGRESS.</h3>
    </center>
    <center>
        <button class="small_button" onclick="window.location.href = `index.html`">Back</button>
    </center><br>
    <h2>Ownership Axis: <span id="A1T"></span></h2>
    <div class="slidecontainer">
        <input type="range" min="0" max="100" value="50" class="slider" id="S1">
    </div><br>
    <div class="axis">
        <img src="./assets/icons/equality.svg" id="equality" height="128px">
        <div style="background-color:#ff0c57;border-right-style:solid;text-align:left" class="bar" id="A1L">
            <div class="text-wrapper" id="A1LL"></div>
        </div>
        <div style="background-color:#1fe545;border-left-style:solid;text-align:right" class="bar" id="A1R">
            <div class="text-wrapper" id="A1RL"></div>
        </div>
        <img src="./assets/icons/property.svg" id="property" height="128px">
    </div>
    <h2>Market Axis: <span id="A2T"></span></h2>
    <div class="slidecontainer">
        <input type="range" min="0" max="100" value="50" class="slider" id="S2">
    </div><br>
    <div class="axis">
        <img src="./assets/icons/coordination.svg" id="coordination" height="128px">
        <div style="background-color:#b900d3;border-right-style:solid;text-align:left" class="bar" id="A2L">
            <div class="text-wrapper" id="A2LL"></div>
        </div>
        <div style="background-color:#ffc100;border-left-style:solid;text-align:right" class="bar" id="A2R">
            <div class="text-wrapper" id="A2RL"></div>
        </div>
        <img src="./assets/icons/commerce.svg" id="commerce" height="128px">
    </div>
    <h2>Power Axis: <span id="A3T"></span></h2>
    <div class="slidecontainer">
        <input type="range" min="0" max="100" value="50" class="slider" id="S3">
    </div><br>
    <div class="axis">
        <img src="./assets/icons/dominion.svg" id="dominion" height="128px">
        <div style="background-color:#0cd1a5;border-right-style:solid;text-align:left" class="bar" id="A3L">
            <div class="text-wrapper" id="A3LL"></div>
        </div>
        <div style="background-color:#ff3a17;border-left-style:solid;text-align:right" class="bar" id="A3R">
            <div class="text-wrapper" id="A3RL"></div>
        </div>
        <img src="./assets/icons/anarchy.svg" id="anarchy" height="128px">
    </div>
    <h2>Autonomy Axis: <span id="A4T"></span></h2>
    <div class="slidecontainer">
        <input type="range" min="0" max="100" value="50" class="slider" id="S4">
    </div><br>
    <div class="axis">
        <img src="./assets/icons/permission.svg" id="permission" height="128px">
        <div style="background-color:#ffff00;border-right-style:solid;text-align:left" class="bar" id="A4L">
            <div class="text-wrapper" id="A4LL"></div>
        </div>
        <div style="background-color:#2876ff;border-left-style:solid;text-align:right" class="bar" id="A4R">
            <div class="text-wrapper" id="A4RL"></div>
        </div>
        <img src="./assets/icons/restriction.svg" id="restriction" height="128px">
    </div>
    <h2>Identity Axis: <span id="A5T"></span></h2>
    <div class="slidecontainer">
        <input type="range" min="0" max="100" value="50" class="slider" id="S5">
    </div><br>
    <div class="axis">
        <img src="./assets/icons/inclusivity.svg" id="inclusivity" height="128px">
        <div style="background-color:#ff15a8;border-right-style:solid;text-align:left" class="bar" id="A5L">
            <div class="text-wrapper" id="A5LL"></div>
        </div>
        <div style="background-color:#ff7b09;border-left-style:solid;text-align:right" class="bar" id="A5R">
            <div class="text-wrapper" id="A5RL"></div>
        </div>
        <img src="./assets/icons/supremacy.svg" id="supremacy" height="128px">
    </div>
    <h2>Progress Axis: <span id="A6T"></span></h2>
    <div class="slidecontainer">
        <input type="range" min="0" max="100" value="50" class="slider" id="S6">
    </div><br>
    <div class="axis">
        <img src="./assets/icons/heritage.svg" id="heritage" height="128px">
        <div style="background-color:#9bf122;border-right-style:solid;text-align:left" class="bar" id="A6L">
            <div class="text-wrapper" id="A6LL"></div>
        </div>
        <div style="background-color:#894efa;border-left-style:solid;text-align:right" class="bar" id="A6R">
            <div class="text-wrapper" id="A6RL"></div>
        </div>
        <img src="./assets/icons/novelty.svg" id="novelty" height="128px">
    </div>
    <h2>Closest Match: <span id="score"></span></h2>
    <h3>Next matches: <span id="score2"></span>, <span id=score3></span></h3>
    <p><span id="desc"></span></p>
</body>

<script>
    var S1 = document.getElementById("S1")
    var A1LL = document.getElementById("A1LL")
    A1LL.innerHTML = A1RL.innerHTML = S1.value
    var S2 = document.getElementById("S2")
    var A2LL = document.getElementById("A2LL")
    A2LL.innerHTML = A2RL.innerHTML = S2.value
    var S3 = document.getElementById("S3")
    var A3LL = document.getElementById("A3LL")
    A3LL.innerHTML = A3RL.innerHTML = S3.value
    var S4 = document.getElementById("S4")
    var A4LL = document.getElementById("A4LL")
    A4LL.innerHTML = A4RL.innerHTML = S4.value
    var S5 = document.getElementById("S5")
    var A5LL = document.getElementById("A5LL")
    A5LL.innerHTML = A5RL.innerHTML = S5.value
    var S6 = document.getElementById("S6")
    var A6LL = document.getElementById("A6LL")
    A6LL.innerHTML = A6RL.innerHTML = S6.value
    S1.oninput = function () {
        A1LL.innerHTML = this.value + "%"
        A1RL.innerHTML = 100 - this.value + "%"
    }
    S2.oninput = function () {
        A2LL.innerHTML = this.value + "%"
        A2RL.innerHTML = 100 - this.value + "%"
    }
    S3.oninput = function () {
        A3LL.innerHTML = this.value + "%"
        A3RL.innerHTML = 100 - this.value + "%"
    }
    S4.oninput = function () {
        A4LL.innerHTML = this.value + "%"
        A4RL.innerHTML = 100 - this.value + "%"
    }
    S5.oninput = function () {
        A5LL.innerHTML = this.value + "%"
        A5RL.innerHTML = 100 - this.value + "%"
    }
    S6.oninput = function () {
        A6LL.innerHTML = this.value + "%"
        A6RL.innerHTML = 100 - this.value + "%"
    }

    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        var bg = "#202020"
        var fg = "#fff"
    } else {
        var bg = "#e0e0e0"
        var fg = "#000"
    }
    function calcaxis(v1, v2) {
        const V1 = parseFloat(v1)
        const V2 = parseFloat(v2)
        return Math.pow(Math.abs(V1 - V2) / 100, 3)
    }
    const keys = ["A1", "A2", "A3", "A4", "A5", "A6"]
    const weights = [1, 0.9, 1, 0.6, 0.6, 0.7]
    const axWeight = [10, 25, 45, 55, 75, 90, 100]
    function orderscores(scores, ideos) {
        let matches = new Array()
        for (const id of ideos) {
            let sum = new Number()
            for (const key in keys) {
                sum += weights[key] * calcaxis(scores[key], id.stats[keys[key]])
            }
            sum /= 6
            matches.push({
                "ideology": id.name,
                "desc": id.desc,
                "score": sum
            })
        }
        matches.sort((a, b) => (a.score - b.score))
        document.getElementById("score").textContent = matches[0].ideology
        document.getElementById("score2").textContent = matches[1].ideology
        document.getElementById("score3").textContent = matches[2].ideology
        document.getElementById("desc").textContent = matches[0].desc
    }
    function axesLabels(scores, axes) {
        for (const i in keys) {
            const score = 100 - parseFloat(scores[i])
            let label = axes[keys[i]][0]
            for (const j in axWeight) {
                if (axWeight[j] >= score) {
                    label = axes[keys[i]][j]
                    break
                }
            }
            document.getElementById(keys[i] + "T").innerText = label
        }
    }
    for (const i in keys) {
        document.getElementById(keys[i] + "L").style.width = res + "%"
        document.getElementById(keys[i] + "R").style.width = 100 - res + "%"
        if (res > 20)
            document.getElementById(keys[i] + "LL").textContent = res + "%"
        if (res < 80)
            document.getElementById(keys[i] + "RL").textContent = (100 - res) + "%"
    }
    (async function () {
        await fetch("./json/axes.json")
            .then(response => response.json())
            .then(data => axesLabels(res, data))
        await fetch("./json/ideologies.json")
            .then(response => response.json())
            .then(data => orderscores(res, data))
    })()
</script>